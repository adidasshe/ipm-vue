(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7da0c38c"],{"0d76":function(t,i,s){"use strict";s.r(i);var o=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{attrs:{id:"map"}},[s("el-dialog",{staticStyle:{"margin-top":"0%","margin-left":"20%",width:"100%"},attrs:{visible:t.dialogVisible,width:"0","close-on-click-modal":!1,"show-close":!1,modal:!1,"modal-append-to-body":!1,top:"0vh",center:!0,fullscreen:!1},on:{"update:visible":function(i){t.dialogVisible=i}}},[s("timer",{staticClass:"timer",attrs:{total_time:t.total_time,restart:t.restart}})],1)],1)},a=[],n=(s("6b54"),function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"time"},[t._v(t._s(t.str))])}),e=[],r=(s("c5f6"),{name:"Timer",props:{total_time:{type:Number},restart:{type:Number}},data:function(){return{h:0,m:0,s:0,ms:0,timer:0,str:"00:00:00:00",times:0}},watch:{restart:{handler:function(t){1===t&&(this.stop(),this.start())}}},created:function(){this.times=this.total_time,this.timer=setInterval(this.startTimer,50)},methods:{startTimer:function(){this.ms=this.ms+50,this.ms>=1e3&&(this.ms=0,this.s=this.s+1),this.s>=60&&(this.s=0,this.m=this.m+1),this.m>=60&&(this.m=0,this.h=this.h+1),this.str=this.toDub(this.h)+":"+this.toDub(this.m)+":"+this.toDub(this.s)+":"+this.toDub1(this.ms);var t=this.s+60*this.m+3600*this.h;t===this.times&&(this.stop(),this.str=this.toDub(this.h)+":"+this.toDub(this.m)+":"+this.toDub(this.s))},toDub:function(t){return t<10?"0"+t:""+t},toDub1:function(t){return t/=10,0===t||5===t?"0"+t:t},stop:function(){clearInterval(this.timer)},start:function(){this.timer=setInterval(this.startTimer,50)}}}),l=r,h=(s("4f66"),s("2877")),c=Object(h["a"])(l,n,e,!1,null,"23925d44",null),d=c.exports,u=(s("b199"),s("2f62"),s("e11eb")),m=s.n(u),p=(s("6cc5"),s("debe"),s("114c"),s("ed6f"),s("6397")),f=s.n(p),b=s("9c4f"),_=s.n(b),g=s("e2b9"),v=s.n(g),k=(s("d8ad"),{data:function(){return{speed:2e3,coors:[[39.550339,116.114129],[39.560339,116.124229],[39.570339,116.134329],[39.600339,116.155329]],temp:{},total_time:0,task:null,points:null,task_id:null,restart:0,dialogFormVisible:!1,dialogVisible:!0,result:"",mapUrl:"http://192.168.0.135/osm_tiles/{z}/{x}/{y}.png",mapUrl2:"http://bigdata5/osm_tiles/{z}/{x}/{y}.png"}},components:{timer:d},mounted:function(){this.init()},methods:{init:function(){var t=this;this.total_time=this.$route.params.total_time,this.task=this.$route.params.data,this.points=this.$route.params.points,this.task_id=this.$route.params.task_id;var i=m.a.map("map",{minZoom:3,maxZoom:17,center:this.task[0].coors[0],zoom:15,zoomControl:!1,attributionControl:!1,crs:m.a.CRS.EPSG3857});m.a.tileLayer(this.mapUrl2,{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(i);var s=m.a.icon({iconUrl:f.a,shadowUrl:v.a});m.a.Marker.prototype.options.icon=s;var o=m.a.icon({iconUrl:_.a,iconSize:[25,39],iconAnchor:[12,39],shadowUrl:null});function a(t){m.a.popup().setLatLng(t.latlng).setContent("经纬度: "+t.latlng.toString()).openOn(i)}i.on("click",a);var n=[];n[0]=[this.points.maxLat,this.points.maxLon],n[1]=[this.points.minLat,this.points.minLon],m.a.rectangle(n,{dashArray:5}).addTo(i);for(var e,r=this.points.dest,l=0;l<r.length;l++)m.a.circleMarker(r[l],{radius:10,color:"red",fillColor:"red",fillOpacity:1}).addTo(i);var h=function(){for(var s=[],a=0;a<t.task.length;a++){var n=m.a.polyline(t.task[a].coors,{color:"red"}),r=m.a.animatedMarker(n.getLatLngs(),{icon:o,distance:200,interval:t.speed});s.push(r)}e=m.a.layerGroup(s),i.addLayer(e),setTimeout((function(){animatedMarker.stop()}),1e-7*1e3)};h();var c=m.a.Toolbar2.Action.extend({options:{toolbarIcon:{html:"查看任务结果",className:"ss",tooltip:"查看任务结果"}},addHooks:function(){t.getResult()}}),d=m.a.Toolbar2.Action.extend({options:{toolbarIcon:{html:"2倍速度回放",className:"ss",tooltip:"回放速度2倍"}},addHooks:function(){t.speed=1e3,e.clearLayers(),h()}}),u=m.a.Toolbar2.Action.extend({options:{toolbarIcon:{html:"5倍速度回放",className:"ss",tooltip:"回放速度5倍"}},addHooks:function(){t.speed=400,e.clearLayers(),h()}}),p=m.a.Toolbar2.Action.extend({options:{toolbarIcon:{html:"20倍速度回放",className:"ss",tooltip:"回放速度20倍"}},addHooks:function(){t.restart=1,t.speed=100,e.clearLayers(),h()}});new m.a.Toolbar2.Control({position:"topleft",actions:[c,d,u,p]}).addTo(i)},getResult:function(){this.$router.push({name:"result",params:{task_id:this.task_id}})}}}),L=k,T=(s("ca2a"),Object(h["a"])(L,o,a,!1,null,null,null));i["default"]=T.exports},"40d6":function(t,i,s){},"4f66":function(t,i,s){"use strict";var o=s("a073"),a=s.n(o);a.a},a073:function(t,i,s){},ca2a:function(t,i,s){"use strict";var o=s("40d6"),a=s.n(o);a.a},d8ad:function(t,i,s){"use strict";var o=s("2b0e");new o["default"]},debe:function(t,i){L.AnimatedMarker=L.Marker.extend({options:{distance:200,interval:1e3,autoStart:!0,onEnd:function(){},clickable:!1},initialize:function(t,i){this.setLine(t),L.Marker.prototype.initialize.call(this,t[0],i)},_chunk:function(t){var i,s=t.length,o=[];for(i=1;i<s;i++){var a=t[i-1],n=t[i],e=a.distanceTo(n),r=this.options.distance/e,l=r*(n.lat-a.lat),h=r*(n.lng-a.lng);if(e>this.options.distance)while(e>this.options.distance)a=new L.LatLng(a.lat+l,a.lng+h),e=a.distanceTo(n),o.push(a);else o.push(a)}return o.push(t[s-1]),o},onAdd:function(t){L.Marker.prototype.onAdd.call(this,t),this.options.autoStart&&this.start()},animate:function(){var t=this,i=this._latlngs.length,s=this.options.interval;this._i<i&&this.i>0&&(s=this._latlngs[this._i-1].distanceTo(this._latlngs[this._i])/this.options.distance*this.options.interval),L.DomUtil.TRANSITION&&(this._icon&&(this._icon.style[L.DomUtil.TRANSITION]="all "+s+"ms linear"),this._shadow&&(this._shadow.style[L.DomUtil.TRANSITION]="all "+s+"ms linear")),this.setLatLng(this._latlngs[this._i]),this._i++,this._tid=setTimeout((function(){t._i===i?t.options.onEnd.apply(t,Array.prototype.slice.call(arguments)):t.animate()}),s)},start:function(){this.animate()},stop:function(){this._tid&&clearTimeout(this._tid)},setLine:function(t){L.DomUtil.TRANSITION?this._latlngs=t:(this._latlngs=this._chunk(t),this.options.distance=10,this.options.interval=30),this._i=0}}),L.animatedMarker=function(t,i){return new L.AnimatedMarker(t,i)}}}]);